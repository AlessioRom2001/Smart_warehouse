<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Storage Slots Status</title>
    <!-- Google Fonts: Roboto -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', Arial, Helvetica, sans-serif;
            background: #fafbfc;
        }
        h1, h2 {
            font-family: 'Roboto', Arial, Helvetica, sans-serif;
            font-weight: 700;
            letter-spacing: 0.5px;
        }
        .slots-container {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin: 30px auto;
            max-width: 800px;
            justify-content: center;
        }
        .slot {
            width: 80px;
            height: 80px;
            margin: 8px;
            border: 2px solid #333;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
            font-weight: 500;
            background-color: #e0e0e0;
            transition: background 0.3s;
            font-family: 'Roboto', Arial, Helvetica, sans-serif;
            letter-spacing: 0.2px;
        }
        .slot.occupied {
            background-color: #ff6f61;
            color: #fff;
        }
        .slot.empty {
            background-color: #81c784;
            color: #fff;
        }
        .slot-label {
            margin-top: 8px;
            text-align: center;
            font-size: 0.95em;
            font-family: 'Roboto', Arial, Helvetica, sans-serif;
        }
        .info-bar {
            max-width:900px;
            margin:0 auto 24px auto;
            text-align:center;
            font-size: 1.1em;
            font-family: 'Roboto', Arial, Helvetica, sans-serif;
            font-weight: 500;
            letter-spacing: 0.2px;
        }
    </style>
</head>
<body>
    <h1 style="text-align:center;">Warehouse Storage View</h1>
    <div class="info-bar">
        <b>Shelves:</b> {{ parameters.number_of_shelves }} &nbsp;|
        <b>Columns per Shelf:</b> {{ parameters.columns_per_shelf }} &nbsp;|
        <b>Levels per Shelf:</b> {{ parameters.levels_per_shelf }}
    </div>
    {% set shelves = parameters.number_of_shelves|int %}
    {% set columns = parameters.columns_per_shelf|int %}
    {% set levels = parameters.levels_per_shelf|int %}
    {% macro slot_status(row, col, level) %}
        {% for slot in slots %}
            {% if slot.row == row and slot.col == col and slot.level == level %}
                {% if slot.in_use %}occupied{% else %}empty{% endif %}
            {% endif %}
        {% endfor %}
    {% endmacro %}
    <div style="display:flex;flex-direction:row;gap:32px;align-items:flex-start;justify-content:center;">
    {% for shelf in range(1, shelves+1) %}
        <div style="display:flex;flex-direction:column;align-items:center;">
            <h2 style="margin-bottom:8px;">Shelf {{ shelf }}</h2>
            {% for level in range(levels, 0, -1) %}
                <div style="display:flex;flex-direction:row;justify-content:center;margin-bottom:4px;">
                    {% for col in range(1, columns+1) %}
                        {% set slot = (slots | selectattr('row', 'equalto', shelf) | selectattr('col', 'equalto', col) | selectattr('level', 'equalto', level) | list).0 %}
                        <div class="slot {% if slot and slot.in_use %}occupied{% else %}empty{% endif %}" title="Shelf {{ shelf }}, Col {{ col }}, Level {{ level }}">
                            {{ col }}-{{ level }}
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
    {% endfor %}
    </div>
</body>
</html>